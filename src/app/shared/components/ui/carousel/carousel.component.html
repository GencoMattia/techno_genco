<div class="relative w-full py-4" *ngIf="photos.length > 0">
  <!-- Slider (adapted from the provided model) -->
  <div class="relative">
  <div class="w-full overflow-hidden bg-white rounded-lg min-w-0 carousel-track-container">
      <div class="relative min-h-72 -mx-1">
     <div class="absolute top-0 bottom-0 left-0 flex flex-nowrap cursor-grab" [ngClass]="{'transition-transform': animate}" [style.transitionDuration.ms]="animate ? transitionDurationMs : 0" [style.transform]="'translateX(calc(-' + (currentIndex * (cardWidth + gap)) + 'px + ' + dragOffset + 'px))'" [style.gap.px]="gap"
       (pointerdown)="onPointerDown($event)" (pointermove)="onPointerMove($event)" (pointerup)="onPointerUp($event)" (pointercancel)="onPointerCancel($event)" style="touch-action: pan-y;">
          <div class="flex-none px-1 min-w-0" *ngFor="let photo of duplicatedPhotos; trackBy: trackByPhotoId" [style.width.px]="cardWidth" [style.min-width.px]="cardWidth" [style.max-width.px]="cardWidth">
            <div class="flex justify-center h-full bg-gray-100 p-6 w-full min-w-0 overflow-hidden" [style.height.px]="cardHeight">
              <img [src]="photo.source" [alt]="photo.name || 'Foto Tecnogenco'" loading="lazy" class="object-cover w-full h-full rounded-lg min-w-0 md:shadow-lg" (error)="onImageError($event, photo)" draggable="false" (dragstart)="$event.preventDefault()" />
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Prev -->
    <button type="button" class="absolute inset-y-0 left-0 inline-flex justify-center items-center w-12 h-full text-gray-800 hover:bg-gray-800/10 rounded-l-lg z-10" (click)="previousSlide()" [attr.aria-label]="'Previous'">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"></path></svg>
    </button>

    <!-- Next -->
    <button type="button" class="absolute inset-y-0 right-0 inline-flex justify-center items-center w-12 h-full text-gray-800 hover:bg-gray-800/10 rounded-r-lg z-10" (click)="nextSlide()" [attr.aria-label]="'Next'">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"></path></svg>
    </button>

    <!-- Pagination -->
    <div class="flex justify-center absolute bottom-0 left-0 right-0 gap-x-2 mt-2">
      <button *ngFor="let i of indicatorArray; let idx = index" (click)="goToIndicator(idx)" [attr.aria-label]="'Vai alla slide ' + (idx + 1)" class="w-3 h-3 rounded-full border border-gray-300 disabled:opacity-50" [ngClass]="{'bg-primary-500': idx === currentIndicator, 'bg-secondary-300': idx !== currentIndicator}"></button>
    </div>
  </div>
</div>

<div class="flex flex-col items-center justify-center py-16 px-8 text-secondary-600" *ngIf="photos.length === 0 && !error">
  <div class="w-12 h-12 border-4 border-secondary-200 border-t-primary-500 rounded-full animate-spin mb-4"></div>
  <p>Caricamento foto...</p>
</div>

<div class="text-center py-8 px-4 text-red-600 bg-red-50 rounded-lg border border-red-200" *ngIf="error">
  <p>{{ errorMessage }}</p>
</div>
